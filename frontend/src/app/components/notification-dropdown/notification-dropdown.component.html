<div class="notification-container">
  <button class="notification-btn" (click)="toggle()">
    <span class="bell-icon">ðŸ””</span>
    @if (notificationService.unreadCount() > 0) {
      <span class="badge">{{ notificationService.unreadCount() }}</span>
    }
  </button>

  @if (isOpen()) {
    <div class="notification-dropdown">
      <div class="dropdown-header">
        <h4>Notifications</h4>
        @if (notificationService.unreadCount() > 0) {
          <button class="mark-all-btn" (click)="markAllAsRead()">Mark all read</button>
        }
      </div>

      <div class="notification-list">
        @if (notificationService.notifications().length === 0) {
          <div class="empty-state">
            <span>ðŸ””</span>
            <p>No notifications yet</p>
          </div>
        } @else {
          @for (notification of notificationService.notifications(); track notification.id) {
            <a [routerLink]="notification.link" 
               class="notification-item" 
               [class.unread]="!notification.is_read"
               (click)="close()">
              <span class="notification-icon">{{ getIcon(notification.type) }}</span>
              <div class="notification-content">
                <strong>{{ notification.title }}</strong>
                <p>{{ notification.message }}</p>
                <span class="notification-time">
                  {{ notification.created_at | date:'short' }}
                </span>
              </div>
              <div class="notification-actions">
                @if (!notification.is_read) {
                  <button class="action-btn" (click)="markAsRead(notification.id, $event)" title="Mark as read">
                    âœ“
                  </button>
                }
                <button class="action-btn delete" (click)="deleteNotification(notification.id, $event)" title="Delete">
                  Ã—
                </button>
              </div>
            </a>
          }
        }
      </div>
    </div>
  }
</div>
